<div class="container my-5">
  <h2 class="text-center text-primary mb-4">База знаний фитнеса</h2>

  <div class="row mb-4 g-3">
    <div class="col-md-4">
      <input type="text" class="form-control" placeholder="Поиск по ключевым словам" (input)="onSearch($event)">
    </div>
    <div class="col-md-2">
      <select class="form-select" (change)="onTopicChange($event)">
        <option value="">Все темы</option>
        @for (t of topics; track t) {
          <option [value]="t">{{t}}</option>
        }
      </select>
    </div>
    <div class="col-md-2">
      <select class="form-select" (change)="onAuthorChange($event)">
        <option value="">Все авторы</option>
        @for (a of authors; track a) {
          <option [value]="a">{{a}}</option>
        }
      </select>
    </div>
    <div class="col-md-2">
      <select class="form-select" (change)="onTypeChange($event)">
        <option value="">Все типы</option>
        @for (ty of types; track ty) {
          <option [value]="ty">{{ty | titlecase}}</option>
        }
      </select>
    </div>
  </div>

  <div class="row g-4">
    @for (item of filteredItems; track item) {
      <div class="col-md-4">
        <div class="card h-100 shadow-sm animate-card">
          @if (isLoggedIn){
            <button class="favorite-btn" (click)="toggleFavorite(item)">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                fill="currentColor">
                <path d="M6 2a1 1 0 0 0-1 1v19l7-5 7 5V3a1 1 0 0 0-1-1H6z" />
              </svg>
            </button>
          }
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{item.title}}</h5>
            <p class="card-text"><strong>Автор:</strong> {{item.author}}</p>
            <p class="card-text"><strong>Тема:</strong> {{item.topic}}</p>
            <p class="card-text"><strong>Тип:</strong> {{item.type | titlecase}}</p>
            <p class="card-text text-truncate">{{item.description}}</p>
            <a routerLink="/knowladge-base/{{item.id}}" class="btn btn-primary mt-auto">Подробнее</a>
          </div>
        </div>
      </div>
    }
  </div>

</div>

<app-footer></app-footer>